<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>My Expenses</title>
  <style>
    :root {
      --blue-700: #305CDE;
      --blue-600: #2F7AE5;
      --neutral-0: #fff;
      --neutral-900: #111827;
      --divider: #e5e7eb;
      --shadow: 0 6px 16px rgba(48, 92, 222, 0.18);
      --focus: 0 0 0 3px rgba(47,122,229,0.28);
    }

    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color: var(--neutral-900); }

    /* Table */
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 8px 10px; border: 1px solid #ddd; }
    th { background: #f5f5f5; text-align: left; }
    tfoot td { font-weight: 600; }

    /* Header bar for actions */
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin: 14px 0;
    }
    .spacer { flex: 1; }

    /* Button style */
    .btn {
      appearance: none;
      border: 0;
      border-radius: 10px;
      background: var(--blue-700);
      color: var(--neutral-0);
      padding: 10px 14px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: background .15s ease, transform .08s ease, box-shadow .15s ease;
    }
    .btn:hover { background: var(--blue-600); transform: translateY(-1px); }
    .btn:active { transform: translateY(0); }
    .btn:focus-visible { outline: none; box-shadow: var(--focus); }

    /* Make a link look like our button if needed */
    .btn-link { text-decoration: none; display: inline-block; }
  </style>
</head>
<body>

  <!-- Logout form styled as a button -->
  <div class="topbar">
    <div class="spacer"></div>
    <form th:action="@{/logout}" method="post" style="margin:0">
      <input type="hidden" th:if="${_csrf != null}"
             th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <button type="submit" class="btn">Logout</button>
    </form>
  </div>

  <h2>My Expenses</h2>
  
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Description</th>
        <th>Date</th>
        <th>Category</th>
        <th>Paid By</th>
        <th>Remark</th>
        <th>Currency</th>
        <th>Amount</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="expense : ${list}">
        <td th:text="${expense.id}">1</td>
        <td th:text="${expense.username}">user</td>
        <td th:text="${expense.description}">desc</td>
        <td th:text="${expense.date}">2025-10-05</td>
        <td th:text="${expense.category}">Travel</td>
        <td th:text="${expense.paidBy_username}">manager1</td>
        <td th:text="${expense.remark}">note</td>
        <td th:text="${expense.currency}">INR</td>
        <td th:text="${expense.amount}">0</td>
        <td th:text="${expense.status}">Submitted</td>

        <td>
          <form th:action="@{/approve/{username}/{id}(username=${expense.username}, id=${expense.id})}" method="post">
            <button type="submit" class="btn">Approve</button>
            <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          </form>
        </td>

        <td>
          <form th:action="@{/reject/{username}/{id}(username=${expense.username}, id=${expense.id})}" method="post">
            <button type="submit" class="btn">Reject</button>
            <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          </form>
        </td>
      </tr>
    </tbody>
  </table>

</body>
</html>
