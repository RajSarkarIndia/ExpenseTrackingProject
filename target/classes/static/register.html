<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>Company Registration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      color-scheme: light dark;

      /* Blue system */
      --blue-900:#0B3A82;
      --blue-700:#305CDE; /* royal blue */
      --blue-600:#2F7AE5; /* action/focus */
      --blue-500:#3B82F6; /* accent */
      --blue-100:#E6F0FF; /* light surface */
      --blue-050:#F4F8FF; /* page bg tint */

      /* Neutrals */
      --white:#ffffff;
      --ink-900:#111827;
      --ink-700:#374151;
      --ink-500:#6B7280;
      --ink-300:#D1D5DB;
      --ink-200:#E5E7EB;

      /* Theme tokens */
      --page-bg:var(--blue-050);
      --surface:var(--white);
      --surface-alt:#FAFBFF;
      --text:var(--ink-900);
      --muted:var(--ink-700);
      --subtle:var(--ink-500);
      --divider:var(--ink-200);

      --field-bg:#FFFFFF;
      --field-border:var(--ink-300);
      --field-focus:var(--blue-600);

      --btn-bg:var(--blue-700);
      --btn-bg-hover:#244DC6;
      --btn-text:#FFFFFF;

      --btn-ghost-bg:#EAF0FF;
      --btn-ghost-text:var(--blue-700);
      --btn-ghost-hover:#DBE6FF;

      --ring:0 0 0 3px rgba(47,122,229,.28);
      --shadow-lg:0 12px 28px rgba(17,24,39,.16);
      --shadow-md:0 8px 20px rgba(17,24,39,.12);
      --radius:14px;
      --radius-sm:10px;
    }

    @media (prefers-color-scheme: dark){
      :root{
        --page-bg:#0b1220;
        --surface:#0f172a;
        --surface-alt:#0b1324;
        --text:#E5E7EB;
        --muted:#CBD5E1;
        --subtle:#94A3B8;
        --divider:#1f2937;

        --field-bg:#0b1324;
        --field-border:#334155;
        --field-focus:#60A5FA;

        --btn-bg:#3B82F6;
        --btn-bg-hover:#2563EB;
        --btn-text:#EAF2FF;

        --btn-ghost-bg:#15233f;
        --btn-ghost-text:#cfe0ff;
        --btn-ghost-hover:#1a2b4f;

        --ring:0 0 0 3px rgba(96,165,250,.35);
        --shadow-lg:0 14px 30px rgba(0,0,0,.55);
        --shadow-md:0 10px 24px rgba(0,0,0,.45);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, "Segoe UI", Roboto, system-ui, -apple-system, sans-serif;
      background:
        radial-gradient(1200px 600px at 10% -10%, #f0f6ff 0%, var(--page-bg) 45%),
        var(--page-bg);
      color:var(--text);
      display:grid;
      place-items:start center;
      padding:40px 16px;
    }

    .shell{
      width:100%;
      max-width:860px;
      background:linear-gradient(180deg, var(--surface) 0%, var(--surface-alt) 100%);
      border:1px solid var(--divider);
      border-radius:18px;
      box-shadow:var(--shadow-lg);
      padding:28px;
    }

    .head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
      margin-bottom:18px;
    }
    .title{
      margin:0;
      font-size:1.5rem;
      font-weight:800;
      letter-spacing:.2px;
      color:var(--blue-900);
    }
    .subtitle{
      margin:6px 0 0 0;
      color:var(--subtle);
      font-size:.98rem;
    }

    form{
      margin-top:12px;
      display:grid;
      grid-template-columns:1fr;
      gap:16px;
    }

    label{
      display:block;
      color:var(--muted);
      font-size:.95rem;
      margin-bottom:8px;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"],
    select{
      width:100%;
      padding:12px 12px;
      border:1px solid var(--field-border);
      border-radius:var(--radius-sm);
      background:var(--field-bg);
      color:var(--text);
      font-size:1rem;
      line-height:1.4;
      transition:border-color .18s ease, box-shadow .18s ease, background .18s ease;
    }

    input:focus, select:focus{
      outline:none;
      border-color:var(--field-focus);
      box-shadow:var(--ring);
      background:#fff;
    }

    .row{
      display:flex;
      flex-direction:column;
    }

    .actions{
      display:flex;
      justify-content:flex-end;
      gap:10px;
      padding-top:8px;
      border-top:1px solid var(--divider);
      margin-top:8px;
    }

    .btn{
      border:none;
      padding:12px 18px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
      font-size:.98rem;
      transition:transform .08s ease, background .15s ease, box-shadow .15s ease;
    }
    .btn.primary{
      background:var(--btn-bg);
      color:var(--btn-text);
      box-shadow:0 6px 16px rgba(48,92,222,.28);
    }
    .btn.primary:hover{
      background:var(--btn-bg-hover);
      transform:translateY(-1px);
      box-shadow:0 8px 20px rgba(48,92,222,.35);
    }
    .btn.primary:focus-visible{outline:none;box-shadow:var(--ring)}
    .btn.ghost{
      background:var(--btn-ghost-bg);
      color:var(--btn-ghost-text);
      box-shadow:0 4px 12px rgba(48,92,222,.12);
    }
    .btn.ghost:hover{
      background:var(--btn-ghost-hover);
    }

    .tip{
      background:linear-gradient(180deg, var(--white) 0%, var(--blue-100) 100%);
      border:1px solid var(--divider);
      border-radius:12px;
      padding:14px 16px;
      box-shadow:var(--shadow-md);
      color:var(--muted);
      font-size:.95rem;
    }

    .two{
      display:grid;
      grid-template-columns:1fr;
      gap:16px;
    }
    @media (min-width:720px){
      .two{ grid-template-columns:1fr 1fr; }
    }
  </style>

  <script>
    async function populateCountries() {
      try {
        const resp = await fetch('https://restcountries.com/v3.1/all?fields=name');
        if (!resp.ok) throw new Error('Network response was not ok');
        const countries = await resp.json();
        countries.sort((a, b) => a.name.common.localeCompare(b.name.common));
        const select = document.getElementById('countrySelect');
        const defaultOpt = document.createElement('option');
        defaultOpt.value = "";
        defaultOpt.textContent = "Select a country";
        defaultOpt.disabled = true;
        defaultOpt.selected = true;
        select.appendChild(defaultOpt);
        countries.forEach(c => {
          const opt = document.createElement('option');
          opt.value = c.name.common;
          opt.textContent = c.name.common;
          select.appendChild(opt);
        });
      } catch (err) {
        console.error('Failed to fetch countries:', err);
      }
    }

    function validateForm(event) {
      const form = document.forms["registrationForm"];
      const password = form["password"].value;
      const confirmPassword = form["confirmPassword"].value;
      if (password !== confirmPassword) {
        alert("Passwords do not match!");
        event.preventDefault();
        return false;
      }
      return true;
    }

    document.addEventListener('DOMContentLoaded', function() {
      populateCountries();
    });
  </script>
</head>
<body>
  <div class="shell">
    <div class="head">
      <div>
        <h1 class="title">Company Registration</h1>
        <p class="subtitle">Create an account to manage company access and settings</p>
      </div>
    </div>

    <div class="tip">Use a unique username with 3–20 characters; only letters, numbers, and underscores are allowed</div>

    <form name="registrationForm" action="/register" method="POST" onsubmit="return validateForm(event)">
      <div class="row">
        <label for="username">Company Username</label>
        <input id="username" type="text" name="username" spellcheck="false" required pattern="^[A-Za-z0-9_]{3,20}$" title="3–20 characters, letters, numbers, or underscores only" autocomplete="username">
      </div>

      <div class="two">
        <div class="row">
          <label for="email">Email</label>
          <input id="email" type="email" name="email" spellcheck="false" required autocomplete="email">
        </div>

        <div class="row">
          <label for="country">Country</label>
          <select id="countrySelect" name="country" required></select>
        </div>
      </div>

      <div class="two">
        <div class="row">
          <label for="password">Password</label>
          <input id="password" type="password" name="password" spellcheck="false" required minlength="6" title="At least 6 characters" autocomplete="new-password">
        </div>

        <div class="row">
          <label for="confirmPassword">Confirm Password</label>
          <input id="confirmPassword" type="password" name="confirmPassword" spellcheck="false" required minlength="6" title="Must match the password" autocomplete="new-password">
        </div>
      </div>

      <div class="actions">
        <button type="reset" class="btn ghost">Clear</button>
        <button type="submit" class="btn primary">Register</button>
      </div>
    </form>
  </div>
</body>
</html>
